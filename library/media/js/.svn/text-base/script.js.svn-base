$(function(){

	/**************************************************************************\
		IE css fixes
	\**************************************************************************/
	if(jQuery.browser.name === 'msie'){
		$('#wrap').addClass('ie');
		var str = 'ie' + jQuery.browser.versionX;
		$('#wrap').addClass(str);
	}
	
	/**************************************************************************\
		Pretty UI messages
	\**************************************************************************/
	jQuery.fn.UCFMessage = function(style) {
		this.each(function() {
			var message = $(this);
			if(message.html()===undefined || !message.html() || message.html().length<1){
				return this;
			}
			
			var icon = {
				highlight : 'info',
				error	  : 'alert',
				success	  : 'check'
			};
			
			var html = "";
			if(message.find('p,h3,h4,h5').length > 0){
				html = '<div class="message"><div class="ui-state-' + style + ' ui-corner-all"> '
						+ message.html()
						+ '</div></div>';
			
			} else {
				html = '<div class="message"><div class="ui-state-' + style + ' ui-corner-all"> '
						+ '<p><span class="ui-icon ui-icon-' + icon[style] + '"></span>'
						+ message.html()
						+ '</p></div></div>';
			}
			message.replaceWith(html);
		});
		return this;
	};
	
	/**************************************************************************\
		FAQ
	\*************************************************************************/
	$('.accordion dt').click(function() {
		$(this).toggleClass('open');
		$(this).next().slideToggle(100);
		$(this).next().siblings('dd').slideUp(100);
		$(this).siblings('dt').removeClass('open');		
	});
	
	/**************************************************************************\
		Slideshow
		Modified: http://jonraasch.com/blog/a-simple-jquery-slideshow
	\*************************************************************************/
	jQuery.fn.slideSwitch = function() {
	    var $active = $('#slideshow img.active');
	    if ( $active.length == 0 ) $active = $('#slideshow img:last');

	    // pull the images in the order they appear in the markup
	    var $next =  $active.next().length ? $active.next() : $('#slideshow IMG:first');

	    // pull the images in random order
	    // var $sibs  = $active.siblings();
	    // var rndNum = Math.floor(Math.random() * $sibs.length );
	    // var $next  = $( $sibs[ rndNum ] );

	    $active.addClass('last-active');

	    $next.css({opacity: 0.0})
	        .addClass('active')
	        .animate({opacity: 1.0}, 2000, function() {
	            $active.removeClass('active last-active');
	        });
	}
	$('#slideshow img:last').addClass('active');
	setInterval( "$().slideSwitch()", 6*1000);
	
	/**************************************************************************\
		Applies styles to select elements
	\**************************************************************************/
	$("input:checkbox, input:radio, input:file").uniform();
	$('.button').button();
	$('#wrap form input[type=submit]').button();
	$('.highlight').UCFMessage('highlight');
	$('.error').UCFMessage('error');
	$('.success').UCFMessage('success');
	
});